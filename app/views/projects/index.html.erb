<div class= "project-all">
   <%if policy(Project).new? %>
   <div class = "btn-new-project">
    <%= link_to 'New Project', new_project_path, :class=>'btn btn-primary' %>
  <% end %></div>

<h1>List of Projects</h1>

    <table>
      <tr>
      	<th>Project ID</th>
        <th>Title</th>
        <th>Description</th>
        <th> </th>
      </tr>
        
      <% @projects.each do |project| %>
      
      <%if current_user.role == "dev" %>
        <% if current_user.projects.find_by_id(project.id) %>
                
                <tr>
                  <td><%= project.id %></td>
                  <td><%= project.title %></td>
                  <td><%= project.description %></td>
                  <td><%= link_to 'Show', project if policy(project).show? :class=> 'btn btn-primary' %></td>
                  <td><%= link_to 'Edit' , edit_project_path(project) if policy(project).edit? %></td>
                  <td><%= link_to 'Delete' ,project_path(project), method: :delete, data: {confirm: 'Are you Sure?'}  if policy(project).destroy? %></td>
                </tr>
          <% end %>


      <% else %>
            <tr>
              <td><%= project.id %></td>
              <td><%= project.title %></td>
              <td><%= project.description %></td>
              <td><%= link_to 'Show' , project if policy(project).show? %></td>
              <td><%= link_to 'Edit' , edit_project_path(project) if policy(project).edit? %></td>
              <td><%= link_to 'Delete' ,project_path(project), method: :delete, data: {confirm: 'Are you Sure?'}  if policy(project).destroy? %></td>
            </tr>  
       <% end %>
      
      <% end %>
   

    </table>
  
  <br>

</div>
